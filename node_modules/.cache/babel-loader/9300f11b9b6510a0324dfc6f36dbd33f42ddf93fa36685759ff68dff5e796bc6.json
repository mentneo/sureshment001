{"ast":null,"code":"var _jsxFileName = \"/Users/yeduruabhiram/Desktop/suresh ment01/src/components/products/ProductCard.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useCart } from '../../contexts/CartContext';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { useNavigate } from 'react-router-dom';\nimport { DEFAULT_TEDDY_IMAGE, checkImageUrl } from '../../utils/cloudinaryUpload';\nimport './ProductCard.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProductCard = ({\n  product\n}) => {\n  _s();\n  const {\n    addToCart\n  } = useCart();\n  const {\n    currentUser\n  } = useAuth();\n  const navigate = useNavigate();\n  const [imageLoaded, setImageLoaded] = useState(false);\n  const [imageError, setImageError] = useState(false);\n  const [imageUrl, setImageUrl] = useState(product.imageUrl || DEFAULT_TEDDY_IMAGE);\n\n  // Check if the image URL is a base64 string\n  const isBase64Image = imageUrl && imageUrl.startsWith('data:image');\n  useEffect(() => {\n    // Verify that the product image URL works\n    const verifyImage = async () => {\n      if (product.imageUrl && !isBase64Image) {\n        try {\n          const isAccessible = await checkImageUrl(product.imageUrl);\n          if (!isAccessible) {\n            console.warn(\"Image URL is not accessible:\", product.imageUrl);\n            setImageUrl(DEFAULT_TEDDY_IMAGE);\n          }\n        } catch (error) {\n          console.error(\"Error verifying image:\", error);\n          setImageUrl(DEFAULT_TEDDY_IMAGE);\n        }\n      }\n    };\n    verifyImage();\n  }, [product.imageUrl, isBase64Image]);\n  const handleAddToCart = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (!currentUser) {\n      navigate('/login', {\n        state: {\n          from: `/product/${product.id}`\n        }\n      });\n      return;\n    }\n    addToCart(product, 1);\n  };\n  const handleImageError = () => {\n    console.error(\"Failed to load image:\", imageUrl);\n    setImageError(true);\n    setImageLoaded(true);\n    setImageUrl(DEFAULT_TEDDY_IMAGE);\n  };\n  const handleImageLoad = () => {\n    console.log(\"Image loaded successfully:\", imageUrl);\n    setImageLoaded(true);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"product-card\",\n    children: [/*#__PURE__*/_jsxDEV(Link, {\n      to: `/product/${product.id}`,\n      className: \"product-link\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"product-image\",\n        children: [!imageLoaded && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"image-placeholder\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"spinner\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: imageError ? DEFAULT_TEDDY_IMAGE : imageUrl,\n          alt: product.name,\n          onError: handleImageError,\n          onLoad: handleImageLoad,\n          style: {\n            display: imageLoaded ? 'block' : 'none'\n          },\n          className: isBase64Image ? 'base64-image' : ''\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"product-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"product-name\",\n          children: product.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"product-price\",\n          children: [\"$\", (product.price || 0).toFixed(2)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"product-description\",\n          children: product.description ? product.description.length > 60 ? `${product.description.substring(0, 60)}...` : product.description : 'No description available'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"add-to-cart-btn\",\n      onClick: handleAddToCart,\n      children: \"Add to Cart\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n};\n_s(ProductCard, \"LR8VsUzVHCXkNCZ+u6fO6E2EviE=\", false, function () {\n  return [useCart, useAuth, useNavigate];\n});\n_c = ProductCard;\nexport default ProductCard;\nvar _c;\n$RefreshReg$(_c, \"ProductCard\");","map":{"version":3,"names":["React","useState","useEffect","Link","useCart","useAuth","useNavigate","DEFAULT_TEDDY_IMAGE","checkImageUrl","jsxDEV","_jsxDEV","ProductCard","product","_s","addToCart","currentUser","navigate","imageLoaded","setImageLoaded","imageError","setImageError","imageUrl","setImageUrl","isBase64Image","startsWith","verifyImage","isAccessible","console","warn","error","handleAddToCart","e","preventDefault","stopPropagation","state","from","id","handleImageError","handleImageLoad","log","className","children","to","fileName","_jsxFileName","lineNumber","columnNumber","src","alt","name","onError","onLoad","style","display","price","toFixed","description","length","substring","onClick","_c","$RefreshReg$"],"sources":["/Users/yeduruabhiram/Desktop/suresh ment01/src/components/products/ProductCard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useCart } from '../../contexts/CartContext';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { useNavigate } from 'react-router-dom';\nimport { DEFAULT_TEDDY_IMAGE, checkImageUrl } from '../../utils/cloudinaryUpload';\nimport './ProductCard.css';\n\nconst ProductCard = ({ product }) => {\n  const { addToCart } = useCart();\n  const { currentUser } = useAuth();\n  const navigate = useNavigate();\n  \n  const [imageLoaded, setImageLoaded] = useState(false);\n  const [imageError, setImageError] = useState(false);\n  const [imageUrl, setImageUrl] = useState(product.imageUrl || DEFAULT_TEDDY_IMAGE);\n  \n  // Check if the image URL is a base64 string\n  const isBase64Image = imageUrl && imageUrl.startsWith('data:image');\n  \n  useEffect(() => {\n    // Verify that the product image URL works\n    const verifyImage = async () => {\n      if (product.imageUrl && !isBase64Image) {\n        try {\n          const isAccessible = await checkImageUrl(product.imageUrl);\n          if (!isAccessible) {\n            console.warn(\"Image URL is not accessible:\", product.imageUrl);\n            setImageUrl(DEFAULT_TEDDY_IMAGE);\n          }\n        } catch (error) {\n          console.error(\"Error verifying image:\", error);\n          setImageUrl(DEFAULT_TEDDY_IMAGE);\n        }\n      }\n    };\n    \n    verifyImage();\n  }, [product.imageUrl, isBase64Image]);\n  \n  const handleAddToCart = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    \n    if (!currentUser) {\n      navigate('/login', { state: { from: `/product/${product.id}` } });\n      return;\n    }\n    \n    addToCart(product, 1);\n  };\n  \n  const handleImageError = () => {\n    console.error(\"Failed to load image:\", imageUrl);\n    setImageError(true);\n    setImageLoaded(true);\n    setImageUrl(DEFAULT_TEDDY_IMAGE);\n  };\n  \n  const handleImageLoad = () => {\n    console.log(\"Image loaded successfully:\", imageUrl);\n    setImageLoaded(true);\n  };\n  \n  return (\n    <div className=\"product-card\">\n      <Link to={`/product/${product.id}`} className=\"product-link\">\n        <div className=\"product-image\">\n          {!imageLoaded && (\n            <div className=\"image-placeholder\">\n              <div className=\"spinner\"></div>\n            </div>\n          )}\n          \n          <img \n            src={imageError ? DEFAULT_TEDDY_IMAGE : imageUrl} \n            alt={product.name}\n            onError={handleImageError}\n            onLoad={handleImageLoad}\n            style={{ display: imageLoaded ? 'block' : 'none' }}\n            className={isBase64Image ? 'base64-image' : ''}\n          />\n        </div>\n        \n        <div className=\"product-info\">\n          <h3 className=\"product-name\">{product.name}</h3>\n          <p className=\"product-price\">${(product.price || 0).toFixed(2)}</p>\n          <p className=\"product-description\">\n            {product.description ? \n              (product.description.length > 60 ? \n                `${product.description.substring(0, 60)}...` : \n                product.description) : \n              'No description available'}\n          </p>\n        </div>\n      </Link>\n      \n      <button \n        className=\"add-to-cart-btn\"\n        onClick={handleAddToCart}\n      >\n        Add to Cart\n      </button>\n    </div>\n  );\n};\n\nexport default ProductCard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}